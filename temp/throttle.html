<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>限流函数</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/lodash@4.17.20/lodash.min.js"></script>
</head>
<body>
<div id="app">
    <button @click="click">Click</button>
    <button @click="throttleClick">限流按钮</button>
    <button @click="debounceClick">防抖按钮</button>
</div>
</body>
<script type="text/javascript">
    const {createApp, ref} = Vue
    let throttle = false

    function throttleTool(callback, timeout) {
        if (!throttle) {
            callback();//执行业务逻辑
        } else {
            return;
        }
        throttle = true;
        setTimeout(() => {
            throttle = false;
        }, timeout)
    }

    const config = {
        setup() {
            function click() {
                throttleTool(() => {
                    console.log(Date())
                }, 2000);
            }

            const throttleClick = _.throttle(function () {
                console.log(Date())
            }, 2000)
            const debounceClick = _.debounce(function () {
                console.log(Date())
            }, 2000)

            return {click, throttleClick, debounceClick}
        }
    }

    createApp(config).mount("#app");
</script>
</html>